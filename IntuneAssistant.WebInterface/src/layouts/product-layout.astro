---
// src/layouts/product-layout.astro
import MainLayout from "./main-layout.astro";
import { ProductSelector } from "@/components/products/ProductSelector";
import { ProductProvider } from "@/contexts/ProductContext";

interface Props {
    title: string;
    description?: string;
    product: 'assistant' | 'rollout' | 'analyser';
}

const { title, description, product } = Astro.props;

// You can fetch user subscription data here or pass it from the page
const userSubscription = Astro.locals.user?.subscription || { products: [] };
---

<MainLayout title={title} description={description}>
    <ProductProvider initialProduct={product} client:load>
        <ProductSelector userSubscription={userSubscription} client:load />

        <div class="product-content">
            <slot />
        </div>
    </ProductProvider>
</MainLayout>